<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Radar Host Communication library: src/Protocol.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Radar Host Communication library
   &#160;<span id="projectnumber">1.2.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_protocol_8c.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Protocol.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file implements the access Infineon sensor devices.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_protocol_8h_source.html">Protocol.h</a>&quot;</code><br />
<code>#include &quot;Protocol_internal.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_c_o_m_port_8h_source.html">COMPort.h</a>&quot;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;Protocol_KnownEndpoints.h&quot;</code><br />
</div>
<p><a href="_protocol_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a42b4c549dcd03ec96b5ba5e4f148c0fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#a42b4c549dcd03ec96b5ba5e4f148c0fd">CNST_STARTBYTE_DATA</a>&#160;&#160;&#160;0x5A</td></tr>
<tr class="separator:a42b4c549dcd03ec96b5ba5e4f148c0fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84667323936fe8621d54b83cd9789dbc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#a84667323936fe8621d54b83cd9789dbc">CNST_STARTBYTE_STATUS</a>&#160;&#160;&#160;0x5B</td></tr>
<tr class="separator:a84667323936fe8621d54b83cd9789dbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb2daf8099b9761137396f2d3c474265"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#aeb2daf8099b9761137396f2d3c474265">CNST_END_OF_PAYLOAD</a>&#160;&#160;&#160;0xE0DB</td></tr>
<tr class="separator:aeb2daf8099b9761137396f2d3c474265"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa05578c88fe17cff975377731e17106f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#aa05578c88fe17cff975377731e17106f">CNST_MSG_QUERY_ENDPOINT_INFO</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:aa05578c88fe17cff975377731e17106f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a9ee21db3026fa951db519c4211e3e5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#a2a9ee21db3026fa951db519c4211e3e5">CNST_MSG_ENDPOINT_INFO</a>&#160;&#160;&#160;0x00</td></tr>
<tr class="separator:a2a9ee21db3026fa951db519c4211e3e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcb17895dc29b0efb26eac3479715d25"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#abcb17895dc29b0efb26eac3479715d25">CNST_MSG_QUERY_FW_INFO</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:abcb17895dc29b0efb26eac3479715d25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a763c07ff0a9cda3c0291722282428cfb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#a763c07ff0a9cda3c0291722282428cfb">CNST_MSG_FW_INFO</a>&#160;&#160;&#160;0x01</td></tr>
<tr class="separator:a763c07ff0a9cda3c0291722282428cfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ce1da0c5a35f56b506caf30fc8c45c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#aa2ce1da0c5a35f56b506caf30fc8c45c">CNST_MSG_FIRMWARE_RESET</a>&#160;&#160;&#160;0x02</td></tr>
<tr class="separator:aa2ce1da0c5a35f56b506caf30fc8c45c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa7a953798f68069e04e51eeef153e9e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#aaa7a953798f68069e04e51eeef153e9e">CNST_PROTOCOL_RECEIVED_PAYLOAD_MSG</a>&#160;&#160;&#160;0x01000000</td></tr>
<tr class="separator:aaa7a953798f68069e04e51eeef153e9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9d495059b56d6671063271f1e3a9b28"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#ac9d495059b56d6671063271f1e3a9b28">NUM_KNOWN_ENDPOINTS</a>&#160;&#160;&#160;(sizeof(known_endpoints) / sizeof(const Endpoint_Definition_t*))</td></tr>
<tr class="separator:ac9d495059b56d6671063271f1e3a9b28"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9f43c7e3d4ce0fd097a22574238b2f7f"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#a9f43c7e3d4ce0fd097a22574238b2f7f">protocol_connect</a> (const char *port_name)</td></tr>
<tr class="memdesc:a9f43c7e3d4ce0fd097a22574238b2f7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function establishes a connection to a device through a COM port.  <a href="#a9f43c7e3d4ce0fd097a22574238b2f7f">More...</a><br /></td></tr>
<tr class="separator:a9f43c7e3d4ce0fd097a22574238b2f7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a043e4544ef7d3a9ba12d186f7f7e7e60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#a043e4544ef7d3a9ba12d186f7f7e7e60">protocol_disconnect</a> (int32_t protocol_handle)</td></tr>
<tr class="memdesc:a043e4544ef7d3a9ba12d186f7f7e7e60"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function closes an open connection.  <a href="#a043e4544ef7d3a9ba12d186f7f7e7e60">More...</a><br /></td></tr>
<tr class="separator:a043e4544ef7d3a9ba12d186f7f7e7e60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0b74eaf568e59087311055790131c1c"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#ad0b74eaf568e59087311055790131c1c">protocol_get_num_endpoints</a> (int32_t protocol_handle)</td></tr>
<tr class="memdesc:ad0b74eaf568e59087311055790131c1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns the number of endpoints in the connected device.  <a href="#ad0b74eaf568e59087311055790131c1c">More...</a><br /></td></tr>
<tr class="separator:ad0b74eaf568e59087311055790131c1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99477ad87d28270f1b3c437d2d01e36b"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#a99477ad87d28270f1b3c437d2d01e36b">protocol_get_firmware_information</a> (int32_t protocol_handle, <a class="el" href="struct_firmware___information__t.html">Firmware_Information_t</a> *information)</td></tr>
<tr class="memdesc:a99477ad87d28270f1b3c437d2d01e36b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns the information about the firmware of the connected device.  <a href="#a99477ad87d28270f1b3c437d2d01e36b">More...</a><br /></td></tr>
<tr class="separator:a99477ad87d28270f1b3c437d2d01e36b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfafe66cebdbe072d420765f2882fd88"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#acfafe66cebdbe072d420765f2882fd88">protocol_do_firmware_reset</a> (int32_t protocol_handle)</td></tr>
<tr class="memdesc:acfafe66cebdbe072d420765f2882fd88"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function triggers a firmware reset of the connected device.  <a href="#acfafe66cebdbe072d420765f2882fd88">More...</a><br /></td></tr>
<tr class="separator:acfafe66cebdbe072d420765f2882fd88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae60bd2bbdb16b2a77bd434ede0fc74a8"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#ae60bd2bbdb16b2a77bd434ede0fc74a8">protocol_get_endpoint_info</a> (int32_t protocol_handle, uint8_t endpoint, <a class="el" href="struct_endpoint___info__t.html">Endpoint_Info_t</a> *endpoint_info)</td></tr>
<tr class="memdesc:ae60bd2bbdb16b2a77bd434ede0fc74a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns information about the requested endpoint.  <a href="#ae60bd2bbdb16b2a77bd434ede0fc74a8">More...</a><br /></td></tr>
<tr class="separator:ae60bd2bbdb16b2a77bd434ede0fc74a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fb28125a15ba4751b575e0593829c1a"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#a7fb28125a15ba4751b575e0593829c1a">protocol_is_endpoint_compatible</a> (int32_t protocol_handle, uint8_t endpoint, const Endpoint_Definition_t *endpoint_definiton)</td></tr>
<tr class="separator:a7fb28125a15ba4751b575e0593829c1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae69fcee227b8fcfa8b35f9a013d3414d"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#ae69fcee227b8fcfa8b35f9a013d3414d">protocol_send_and_receive</a> (int32_t protocol_handle, uint8_t endpoint, const Endpoint_Definition_t *endpoint_definiton, const uint8_t *payload, uint16_t payload_size)</td></tr>
<tr class="separator:ae69fcee227b8fcfa8b35f9a013d3414d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac196cc8c51a8d3cbd8da26b24547868d"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_protocol_8c.html#ac196cc8c51a8d3cbd8da26b24547868d">protocol_get_status_code_description</a> (int32_t protocol_handle, int32_t status_code)</td></tr>
<tr class="memdesc:ac196cc8c51a8d3cbd8da26b24547868d"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns a human readable description of a status or error code.  <a href="#ac196cc8c51a8d3cbd8da26b24547868d">More...</a><br /></td></tr>
<tr class="separator:ac196cc8c51a8d3cbd8da26b24547868d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file implements the access Infineon sensor devices. </p>
<p>The API to this module is split up into the two header files <a class="el" href="_protocol_8h.html">Protocol.h</a> and Protocol_internal.h. See <a class="el" href="_protocol_8h.html">Protocol.h</a> for a basic description of the communication scheme. That header declares functions to be called by users of the communication library. The header Protocol_internal.h declares those functions that are meant to be called by endpoint implementations inside the communication library. </p>

<p class="definition">Definition in file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aeb2daf8099b9761137396f2d3c474265"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb2daf8099b9761137396f2d3c474265">&#9670;&nbsp;</a></span>CNST_END_OF_PAYLOAD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CNST_END_OF_PAYLOAD&#160;&#160;&#160;0xE0DB</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Every payload message ends with this 16 bit value (transmitted with low byte first!). </p>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00064">64</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="a2a9ee21db3026fa951db519c4211e3e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a9ee21db3026fa951db519c4211e3e5">&#9670;&nbsp;</a></span>CNST_MSG_ENDPOINT_INFO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CNST_MSG_ENDPOINT_INFO&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A message containing endpoint information sent from endpoint 0 starts with this message type code. </p>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00079">79</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="aa2ce1da0c5a35f56b506caf30fc8c45c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2ce1da0c5a35f56b506caf30fc8c45c">&#9670;&nbsp;</a></span>CNST_MSG_FIRMWARE_RESET</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CNST_MSG_FIRMWARE_RESET&#160;&#160;&#160;0x02</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This command code sent to endpoint 0 tells the device to do a firmware reset. </p>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00100">100</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="a763c07ff0a9cda3c0291722282428cfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a763c07ff0a9cda3c0291722282428cfb">&#9670;&nbsp;</a></span>CNST_MSG_FW_INFO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CNST_MSG_FW_INFO&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A message containing firmware information sent from endpoint 0 starts with this message type code. </p>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00093">93</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="aa05578c88fe17cff975377731e17106f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa05578c88fe17cff975377731e17106f">&#9670;&nbsp;</a></span>CNST_MSG_QUERY_ENDPOINT_INFO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CNST_MSG_QUERY_ENDPOINT_INFO&#160;&#160;&#160;0x00</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This command code sent to endpoint 0 tells the device to send information about the protocol endpoints. </p>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00072">72</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="abcb17895dc29b0efb26eac3479715d25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcb17895dc29b0efb26eac3479715d25">&#9670;&nbsp;</a></span>CNST_MSG_QUERY_FW_INFO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CNST_MSG_QUERY_FW_INFO&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This command code sent to endpoint 0 tells the device to send information about its firmware. </p>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00086">86</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="aaa7a953798f68069e04e51eeef153e9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa7a953798f68069e04e51eeef153e9e">&#9670;&nbsp;</a></span>CNST_PROTOCOL_RECEIVED_PAYLOAD_MSG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CNST_PROTOCOL_RECEIVED_PAYLOAD_MSG&#160;&#160;&#160;0x01000000</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>If get_message received a regular payload message, this code is returned. </p>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00106">106</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="a42b4c549dcd03ec96b5ba5e4f148c0fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42b4c549dcd03ec96b5ba5e4f148c0fd">&#9670;&nbsp;</a></span>CNST_STARTBYTE_DATA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CNST_STARTBYTE_DATA&#160;&#160;&#160;0x5A</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A pad load message begins with this code byte. </p>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00058">58</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="a84667323936fe8621d54b83cd9789dbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84667323936fe8621d54b83cd9789dbc">&#9670;&nbsp;</a></span>CNST_STARTBYTE_STATUS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CNST_STARTBYTE_STATUS&#160;&#160;&#160;0x5B</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A status message begins with this code byte. </p>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00061">61</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="ac9d495059b56d6671063271f1e3a9b28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9d495059b56d6671063271f1e3a9b28">&#9670;&nbsp;</a></span>NUM_KNOWN_ENDPOINTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_KNOWN_ENDPOINTS&#160;&#160;&#160;(sizeof(known_endpoints) / sizeof(const Endpoint_Definition_t*))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00234">234</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a9f43c7e3d4ce0fd097a22574238b2f7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f43c7e3d4ce0fd097a22574238b2f7f">&#9670;&nbsp;</a></span>protocol_connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t protocol_connect </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>port_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function establishes a connection to a device through a COM port. </p>
<p>This function tries to open the specified COM port. The COM port name must identify an existing COM port and is platform and machine specific. It is recommended to call <a class="el" href="_c_o_m_port_8h.html#a5f388e36295420d01771c7293800e37b">com_get_port_list</a> to get a list of available COM ports. Port names not in the returned list won't be accepted.</p>
<p>If the specified COM could be opened, information about the endpoints present in the connected device is queried. If endpoint information could not be retrieved properly, the device is considered to not be compatible with the communication protocol and the connection is closed again.</p>
<p>If a connection can be established, the function returns a handle that must be passed to all following function calls to identify the device. When the connection is not needed any more, it should be closed by calling <a class="el" href="_protocol_8c.html#a043e4544ef7d3a9ba12d186f7f7e7e60">protocol_disconnect</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port_name</td><td>A zero-terminated string containing the device name of the COM port to use.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If a connection could be established the function returns a handle that is positive or 0. If the connection could not be established, a negative error code is returned. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00476">476</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="a043e4544ef7d3a9ba12d186f7f7e7e60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a043e4544ef7d3a9ba12d186f7f7e7e60">&#9670;&nbsp;</a></span>protocol_disconnect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void protocol_disconnect </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>protocol_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function closes an open connection. </p>
<p>If a valid handle to an open connection is provided, the according connection is closed and the handle is marked as invalid. If the handle is invalid, nothing will happen. Either way the handle must not be used any more after calling this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">protocol_handle</td><td>A handle to an open connection. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00626">626</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="acfafe66cebdbe072d420765f2882fd88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfafe66cebdbe072d420765f2882fd88">&#9670;&nbsp;</a></span>protocol_do_firmware_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t protocol_do_firmware_reset </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>protocol_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function triggers a firmware reset of the connected device. </p>
<p>This function sends a message to the connected device to trigger a firmware ware reset and waits for the answer.</p>
<p>After calling this function, <a class="el" href="_protocol_8c.html#a043e4544ef7d3a9ba12d186f7f7e7e60">protocol_disconnect</a> should be called immediately to ensure a proper reboot of the connected device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">protocol_handle</td><td>A handle to an open connection returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the provided handle is valid and the reset feature is supported by the connected device, 0 will be returned. Otherwise an error code is returned. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00749">749</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="ae60bd2bbdb16b2a77bd434ede0fc74a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae60bd2bbdb16b2a77bd434ede0fc74a8">&#9670;&nbsp;</a></span>protocol_get_endpoint_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t protocol_get_endpoint_info </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>protocol_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_endpoint___info__t.html">Endpoint_Info_t</a> *&#160;</td>
          <td class="paramname"><em>endpoint_info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function returns information about the requested endpoint. </p>
<p>When the connection is established (see <a class="el" href="_protocol_8c.html#a9f43c7e3d4ce0fd097a22574238b2f7f">protocol_connect</a>), information about the endpoints in the connected device is retrieved. This function returns information about the requested endpoints that was received when the connection was established. The endpoint information is not queried from the device again.</p>
<p>The caller must provide a valid pointer to a structure of type <a class="el" href="struct_endpoint___info__t.html">Endpoint_Info_t</a>. That structure may be uninitialized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">protocol_handle</td><td>A handle to an open connection. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">endpoint</td><td>The number of the requested endpoint. (First endpoint is 1, not 0!) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">endpoint_info</td><td>A pointer to the structure, where the endpoint information will be written to.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the provided handle is valid, and the requested endpoint exists, 0 will be returned and endpoint information will be written to endpoint_info. Otherwise a negative error code is returned and endpoint_info will not be modified. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00794">794</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="a99477ad87d28270f1b3c437d2d01e36b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99477ad87d28270f1b3c437d2d01e36b">&#9670;&nbsp;</a></span>protocol_get_firmware_information()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t protocol_get_firmware_information </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>protocol_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_firmware___information__t.html">Firmware_Information_t</a> *&#160;</td>
          <td class="paramname"><em>information</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function returns the information about the firmware of the connected device. </p>
<p>This function sends a message to the connected device to query information about the firmware and waits for the answer. The reply message is evaluated and firmware information is written into the provided structure.</p>
<p>Note: This function allocates memory to hold the firmware description string. The caller must take core for freeing that memory when it's no longer needed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">protocol_handle</td><td>A handle to an open connection returned. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">information</td><td>A pointer to the structure, where the firmware information will be stored.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the provided handle is valid, 0 will be returned and firmware information will be written to information. Otherwise a negative error code is returned and pVersion will not be modified. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00670">670</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="ad0b74eaf568e59087311055790131c1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0b74eaf568e59087311055790131c1c">&#9670;&nbsp;</a></span>protocol_get_num_endpoints()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t protocol_get_num_endpoints </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>protocol_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function returns the number of endpoints in the connected device. </p>
<p>When the connection is established (see <a class="el" href="_protocol_8c.html#a9f43c7e3d4ce0fd097a22574238b2f7f">protocol_connect</a>), information about the endpoints in the connected device is retrieved. A device compatible with the communication protocol contains at least one endpoint. If a board reports to have no endpoints, the connection won't be established. This function returns the number of endpoints received when the connection was established. The number of endpoints is not queried from the device again.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">protocol_handle</td><td>A handle to an open connection returned.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the provided handle is valid, a positive number of endpoints is returned, otherwise a negative error code is returned. This function won't return 0. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00657">657</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="ac196cc8c51a8d3cbd8da26b24547868d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac196cc8c51a8d3cbd8da26b24547868d">&#9670;&nbsp;</a></span>protocol_get_status_code_description()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* protocol_get_status_code_description </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>protocol_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>status_code</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function returns a human readable description of a status or error code. </p>
<p>Whenever a protocol or endpoint function returns a negative error code or a positive status code sent by an endpoint in a connected device, this function can be used to get a human readable description of that code.</p>
<p>The protocol handle is needed when retrieving a description for a status code sent by the device. When retrieving the description of a negative error code, the handle is ignored. This allows to retrieve error description in case a connection could not be established.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">protocol_handle</td><td>A handle to an open connection. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">status_code</td><td>The status or error code to be described.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>This function returns a pointer to a zero-terminated string containing the human readable description. The caller must not free or modify the memory pointed to. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00928">928</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="a7fb28125a15ba4751b575e0593829c1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fb28125a15ba4751b575e0593829c1a">&#9670;&nbsp;</a></span>protocol_is_endpoint_compatible()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t protocol_is_endpoint_compatible </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>protocol_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Endpoint_Definition_t *&#160;</td>
          <td class="paramname"><em>endpoint_definiton</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00831">831</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
<a id="ae69fcee227b8fcfa8b35f9a013d3414d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae69fcee227b8fcfa8b35f9a013d3414d">&#9670;&nbsp;</a></span>protocol_send_and_receive()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t protocol_send_and_receive </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>protocol_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const Endpoint_Definition_t *&#160;</td>
          <td class="paramname"><em>endpoint_definiton</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>payload_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="_protocol_8c_source.html#l00861">861</a> of file <a class="el" href="_protocol_8c_source.html">Protocol.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="_protocol_8c.html">Protocol.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
