<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Radar Host Communication library: include/COMPort.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Radar Host Communication library
   &#160;<span id="projectnumber">1.2.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_c_o_m_port_8h.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">COMPort.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file defines the API to access a serial communication port.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
</div>
<p><a href="_c_o_m_port_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5f388e36295420d01771c7293800e37b"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_c_o_m_port_8h.html#a5f388e36295420d01771c7293800e37b">com_get_port_list</a> (char *port_list, size_t buffer_size)</td></tr>
<tr class="memdesc:a5f388e36295420d01771c7293800e37b"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns a list of available COM ports.  <a href="#a5f388e36295420d01771c7293800e37b">More...</a><br /></td></tr>
<tr class="separator:a5f388e36295420d01771c7293800e37b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e9435c15e70f9b305f2f59fc8e90ee4"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_c_o_m_port_8h.html#a7e9435c15e70f9b305f2f59fc8e90ee4">com_open</a> (const char *port_name)</td></tr>
<tr class="memdesc:a7e9435c15e70f9b305f2f59fc8e90ee4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This functions opens the specified COM port.  <a href="#a7e9435c15e70f9b305f2f59fc8e90ee4">More...</a><br /></td></tr>
<tr class="separator:a7e9435c15e70f9b305f2f59fc8e90ee4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5fda9b47ba406abedbcb01771e8c841"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_c_o_m_port_8h.html#ad5fda9b47ba406abedbcb01771e8c841">com_close</a> (int32_t port_handle)</td></tr>
<tr class="memdesc:ad5fda9b47ba406abedbcb01771e8c841"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function closes the specified COM port.  <a href="#ad5fda9b47ba406abedbcb01771e8c841">More...</a><br /></td></tr>
<tr class="separator:ad5fda9b47ba406abedbcb01771e8c841"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d88796ebf50703b2623241d37176978"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_c_o_m_port_8h.html#a7d88796ebf50703b2623241d37176978">com_send_data</a> (int32_t port_handle, const void *data, size_t num_bytes)</td></tr>
<tr class="memdesc:a7d88796ebf50703b2623241d37176978"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sends data through an open COM port.  <a href="#a7d88796ebf50703b2623241d37176978">More...</a><br /></td></tr>
<tr class="separator:a7d88796ebf50703b2623241d37176978"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a630e9eb8fbce2069a53e8b9d713d88"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_c_o_m_port_8h.html#a0a630e9eb8fbce2069a53e8b9d713d88">com_get_data</a> (int32_t port_handle, void *data, size_t num_requested_bytes)</td></tr>
<tr class="memdesc:a0a630e9eb8fbce2069a53e8b9d713d88"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function reads data from an open COM port.  <a href="#a0a630e9eb8fbce2069a53e8b9d713d88">More...</a><br /></td></tr>
<tr class="separator:a0a630e9eb8fbce2069a53e8b9d713d88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d9019e7e6351bfc8af49feda5b80d73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_c_o_m_port_8h.html#a9d9019e7e6351bfc8af49feda5b80d73">com_set_timeout</a> (int32_t port_handle, uint32_t timeout_period_ms)</td></tr>
<tr class="memdesc:a9d9019e7e6351bfc8af49feda5b80d73"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function changes the timeout period of an open COM port.  <a href="#a9d9019e7e6351bfc8af49feda5b80d73">More...</a><br /></td></tr>
<tr class="separator:a9d9019e7e6351bfc8af49feda5b80d73"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file defines the API to access a serial communication port. </p>
<p>This interface is an abstraction of a serial communication port. The interface provides basic operations open, close, read and write. Additionally it allows to get a list of available ports.</p>
<p>Even though the name is 'COMPort', the actual communication may use a different type of connection (COM, USB, SPI, etc.). The implementation is platform specific and will look differently for each combination of platform and connection type. </p>

<p class="definition">Definition in file <a class="el" href="_c_o_m_port_8h_source.html">COMPort.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ad5fda9b47ba406abedbcb01771e8c841"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5fda9b47ba406abedbcb01771e8c841">&#9670;&nbsp;</a></span>com_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com_close </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>port_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function closes the specified COM port. </p>
<p>The function expects a handle to an open COM port that have been returned by <a class="el" href="_c_o_m_port_8h.html#a7e9435c15e70f9b305f2f59fc8e90ee4">com_open</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port_handle</td><td>The handle to the open COM port that should be closed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0a630e9eb8fbce2069a53e8b9d713d88"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a630e9eb8fbce2069a53e8b9d713d88">&#9670;&nbsp;</a></span>com_get_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t com_get_data </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>port_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_requested_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function reads data from an open COM port. </p>
<p>The function tries to read the specified number of bytes from an open COM port and stores them in the provided buffer. The function waits for the data, but returns after an internally defined timeout period and returns the number of received bytes.</p>
<p>The function expects a handle to an open COM port that have been returned by <a class="el" href="_c_o_m_port_8h.html#a7e9435c15e70f9b305f2f59fc8e90ee4">com_open</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port_handle</td><td>The handle to the open COM port. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>A pointer to the buffer where the received data will be stored. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_requested_bytes</td><td>The number of bytes that should be read from the COM port.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns the number of bytes that actually have been received. This number may be smaller than uNumRequestedBytes. </dd></dl>

</div>
</div>
<a id="a5f388e36295420d01771c7293800e37b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f388e36295420d01771c7293800e37b">&#9670;&nbsp;</a></span>com_get_port_list()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t com_get_port_list </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>port_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buffer_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function returns a list of available COM ports. </p>
<p>The port list is compiled into a zero terminated string, where all available ports are separated by a semicolon (';'). The string buffer to hold the port list must be provided by the caller. If the buffer is not sufficient to hold the names of all available ports, it is filled with as much complete port names as possible. Port names will not be truncated.</p>
<p>The function will return the number of available COM ports regardless of the number of port names that have been written to the buffer. The caller can count the number of names in the string buffer and compare with the returned number to check if it is sensible to call this function again with a bigger string buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">port_list</td><td>A pointer to the string buffer where the port names will be written to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer_size</td><td>The size of the string buffer in bytes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The function returns the number of available COM ports. </dd></dl>

</div>
</div>
<a id="a7e9435c15e70f9b305f2f59fc8e90ee4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e9435c15e70f9b305f2f59fc8e90ee4">&#9670;&nbsp;</a></span>com_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t com_open </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>port_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This functions opens the specified COM port. </p>
<p>The name of the COM port must be provided as zero terminated string. It is recommended to call <a class="el" href="_c_o_m_port_8h.html#a5f388e36295420d01771c7293800e37b">com_get_port_list</a> to find the available COM ports and pass one of the returned port names to the open function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port_name</td><td>A zero terminated string containing the name of the COM port</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the function succeeds, a handle to the opened COM port is returned. That handle is always zero or positive. If the COM port can't be opened, a negative value is returned, which is the forwarded error code from the operating system. </dd></dl>

</div>
</div>
<a id="a7d88796ebf50703b2623241d37176978"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d88796ebf50703b2623241d37176978">&#9670;&nbsp;</a></span>com_send_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com_send_data </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>port_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_bytes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sends data through an open COM port. </p>
<p>The function transmits each byte from the provided buffer through the specified COM port and returns after the last byte has been sent.</p>
<p>The function expects a handle to an open COM port that have been returned by <a class="el" href="_c_o_m_port_8h.html#a7e9435c15e70f9b305f2f59fc8e90ee4">com_open</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port_handle</td><td>The handle to the open COM port. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>A pointer to the buffer containing the data to be sent. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_bytes</td><td>The number of bytes in pBuffer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9d9019e7e6351bfc8af49feda5b80d73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d9019e7e6351bfc8af49feda5b80d73">&#9670;&nbsp;</a></span>com_set_timeout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void com_set_timeout </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>port_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout_period_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function changes the timeout period of an open COM port. </p>
<p>This function changes the timeout period that will be used when data is read through <a class="el" href="_c_o_m_port_8h.html#a0a630e9eb8fbce2069a53e8b9d713d88">com_get_data</a>. That function will wait until timeout period is elapsed before returning, if not enough data is received.</p>
<p>The function expects a handle to an open COM port that have been returned by <a class="el" href="_c_o_m_port_8h.html#a7e9435c15e70f9b305f2f59fc8e90ee4">com_open</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">port_handle</td><td>The handle to the open COM port. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_period_ms</td><td>The new timeout period in milli seconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="_c_o_m_port_8h.html">COMPort.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>
